<div class="h-full flex flex-col">
    <div class="flex items-center justify-between mb-2">
        <div class="flex items-center gap-2">
            <i class="fa-solid fa-book-open text-mil-accent text-xs"></i>
            <h3 class="text-xs font-mono font-bold text-mil-muted uppercase tracking-wider">AUDIOBOOKSHELF</h3>
        </div>
        <div class="flex items-center gap-2">
            <span class="w-1.5 h-1.5 rounded-full bg-mil-success animate-pulse"></span>
            <span class="text-[10px] font-mono text-mil-muted">{{ abs.total_books }} BOOKS</span>
        </div>
    </div>

    <div class="flex-1 min-h-0 relative group/container">
        {% if abs.status == 'error' %}
        <div class="h-full flex flex-col items-center justify-center text-mil-error gap-2 text-center px-4">
            <i class="fa-solid fa-triangle-exclamation text-xl"></i>
            <span class="text-[10px] font-mono uppercase">{{ abs.error }}</span>
        </div>
        {% else %}

        <!-- Horizontal Scroll Container with CSS Animation -->
        <div class="absolute inset-0 overflow-hidden pb-2">
            <div id="audiobook-scroll-container" class="flex gap-3 h-full"
                style="animation: marquee 30s linear infinite; will-change: transform;"
                onmouseenter="this.style.animationPlayState='paused'"
                onmouseleave="this.style.animationPlayState='running'">
                {% for i in range(4) %}
                {% for book in abs.recent_books %}
                <div
                    class="relative flex-shrink-0 w-40 h-full bg-mil-black border border-mil-border group cursor-pointer transition-all hover:border-mil-accent overflow-hidden">
                    {% if book.cover %}
                    <img src="{{ book.cover }}" alt="cover" loading="lazy"
                        class="w-full h-full object-cover opacity-80 group-hover:opacity-100 transition-opacity">
                    {% else %}
                    <div class="w-32 h-full flex items-center justify-center text-mil-muted bg-mil-dark">
                        <i class="fa-solid fa-book text-2xl"></i>
                    </div>
                    {% endif %}

                    <!-- Hover Overlay -->
                    <div
                        class="absolute inset-0 bg-black/80 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-end p-2">
                        <h4 class="text-[10px] font-mono font-bold text-mil-text leading-tight mb-1 line-clamp-3">{{
                            book.title }}</h4>
                        <p class="text-[9px] font-mono text-mil-muted line-clamp-1">{{ book.author }}</p>
                    </div>
                </div>
                {% endfor %}
                {% endfor %}
            </div>
        </div>

        <style>
            @keyframes marquee {
                0% {
                    transform: translateX(0);
                }

                100% {
                    transform: translateX(-50%);
                }
            }
        </style>

        {% if not abs.recent_books %}
        <div class="w-full h-full flex flex-col items-center justify-center text-mil-muted/50 gap-2">
            <i class="fa-solid fa-book-open text-xl"></i>
            <span class="text-[10px] font-mono uppercase">NO BOOKS FOUND</span>
        </div>
        {% endif %}
    </div>
    {% endif %}
</div>
</div>