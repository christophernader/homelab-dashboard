{% if pihole %}
<div class="shiny-border p-4">
  <div class="flex items-center justify-between mb-4">
    <div class="flex items-center gap-2">
      <i class="fa-solid fa-shield-halved text-mil-accent"></i>
      <span class="text-[10px] font-mono uppercase tracking-wider text-mil-muted">Pi-hole</span>
    </div>
    <span class="text-[9px] font-mono uppercase px-2 py-0.5 {% if pihole.status == 'enabled' %}bg-mil-success/20 text-mil-success{% else %}bg-mil-error/20 text-mil-error{% endif %}">
      {{ pihole.status | upper }}
    </span>
  </div>

  {% if pihole.error %}
  <p class="text-xs text-mil-error">{{ pihole.error }}</p>
  {% else %}
  <div class="grid grid-cols-2 gap-4">
    <div>
      <p class="text-2xl font-mono text-mil-accent">{{ "{:,.0f}".format(pihole.ads_blocked_today) }}</p>
      <p class="text-[9px] font-mono uppercase text-mil-muted">Blocked Today</p>
    </div>
    <div>
      <p class="text-2xl font-mono text-mil-text">{{ "%.1f"|format(pihole.ads_percentage_today) }}%</p>
      <p class="text-[9px] font-mono uppercase text-mil-muted">Block Rate</p>
    </div>
    <div>
      <p class="text-lg font-mono text-mil-text">{{ "{:,.0f}".format(pihole.dns_queries_today) }}</p>
      <p class="text-[9px] font-mono uppercase text-mil-muted">Total Queries</p>
    </div>
    <div>
      <p class="text-lg font-mono text-mil-text">{{ pihole.unique_clients }}</p>
      <p class="text-[9px] font-mono uppercase text-mil-muted">Clients</p>
    </div>
  </div>

  <div class="mt-4 pt-4 border-t border-mil-border">
    <div class="flex justify-between text-[9px] font-mono text-mil-muted">
      <span>Domains on blocklist: {{ "{:,.0f}".format(pihole.domains_blocked) }}</span>
      <span>Gravity: {{ pihole.gravity_last_updated }}d ago</span>
    </div>
  </div>
  {% endif %}
</div>
{% endif %}
