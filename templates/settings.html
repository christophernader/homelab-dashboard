<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings | Homelab Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Inter:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            mono: ['JetBrains Mono', 'monospace'],
            sans: ['Inter', 'system-ui', 'sans-serif']
          },
          colors: {
            mil: {
              black: '#0a0a0a',
              dark: '#111111',
              card: '#151515',
              border: '#252525',
              text: '#e5e5e5',
              muted: '#6b6b6b',
              accent: '#f97316',
              success: '#22c55e',
              error: '#ef4444',
            }
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    crossorigin="anonymous" />
  <link rel="stylesheet" href="/static/css/settings.css" />
</head>

<body class="min-h-screen bg-mil-black text-mil-text font-sans">
  <!-- Header -->
  <header class="border-b border-mil-border bg-mil-dark">
    <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <a href="/" class="flex items-center gap-3 text-mil-muted hover:text-mil-text transition-colors">
          <i class="fa-solid fa-arrow-left"></i>
          <span class="text-xs font-mono uppercase tracking-wider">Back to Dashboard</span>
        </a>
      </div>
      <h1 class="text-sm font-mono uppercase tracking-widest text-mil-accent">Settings</h1>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6 py-8">
    <!-- Tab Navigation -->
    <div class="flex gap-2 border-b border-mil-border mb-8">
      <button onclick="showTab('widgets')" id="tab-widgets"
        class="tab-btn px-4 py-3 text-xs font-mono uppercase tracking-wider border-b-2 border-mil-accent text-mil-accent">
        <i class="fa-solid fa-puzzle-piece mr-2"></i> Widgets
      </button>
      <button onclick="showTab('integrations')" id="tab-integrations"
        class="tab-btn px-4 py-3 text-xs font-mono uppercase tracking-wider border-b-2 border-transparent text-mil-muted hover:text-mil-text">
        <i class="fa-solid fa-plug mr-2"></i> Integrations
      </button>
      <button onclick="showTab('appearance')" id="tab-appearance"
        class="tab-btn px-4 py-3 text-xs font-mono uppercase tracking-wider border-b-2 border-transparent text-mil-muted hover:text-mil-text">
        <i class="fa-solid fa-palette mr-2"></i> Appearance
      </button>
      <button onclick="showTab('dashboard')" id="tab-dashboard"
        class="tab-btn px-4 py-3 text-xs font-mono uppercase tracking-wider border-b-2 border-transparent text-mil-muted hover:text-mil-text">
        <i class="fa-solid fa-gauge-high mr-2"></i> Dashboard
      </button>
    </div>

    <!-- Widgets Tab -->
    {% include 'partials/settings/widgets.html' %}

    <!-- Integrations Tab -->
    {% include 'partials/settings/integrations.html' %}

    <!-- Appearance Tab -->
    {% include 'partials/settings/appearance.html' %}

    <!-- Dashboard Tab -->
    {% include 'partials/settings/dashboard.html' %}
  </main>

  <script>
    function showTab(tabName) {
      // Hide all panels
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.add('hidden'));
      // Deactivate all tabs
      document.querySelectorAll('.tab-btn').forEach(t => {
        t.classList.remove('border-mil-accent', 'text-mil-accent');
        t.classList.add('border-transparent', 'text-mil-muted');
      });
      // Show selected panel
      document.getElementById(`panel-${tabName}`).classList.remove('hidden');
      // Activate selected tab
      const tab = document.getElementById(`tab-${tabName}`);
      tab.classList.remove('border-transparent', 'text-mil-muted');
      tab.classList.add('border-mil-accent', 'text-mil-accent');
    }

    // Show success/error notifications
    document.body.addEventListener('htmx:afterRequest', (e) => {
      if (e.detail.successful) {
        // Could show a toast notification here
        console.log('Settings saved');
      }
    });
  </script>
</body>

</html>